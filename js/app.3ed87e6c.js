(function(e){function t(t){for(var s,r,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,r=1;r<a.length;r++){var i=a[r];0!==n[i]&&(s=!1)}s&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var s={},r={app:0},n={app:0},o=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d0ac41b":"af0b5678","chunk-2d0af123":"57e585b9","chunk-30869222":"bb6c6668","chunk-418bf4a6":"6c3274a9","chunk-418d3724":"c750e739","chunk-4334439e":"4f672a8a","chunk-9f787bf8":"4821ca06","chunk-c432d8d0":"c8dc8e4f"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-c432d8d0":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var s="css/"+({}[e]||e)+"."+{"chunk-2d0ac41b":"31d6cfe0","chunk-2d0af123":"31d6cfe0","chunk-30869222":"31d6cfe0","chunk-418bf4a6":"31d6cfe0","chunk-418d3724":"31d6cfe0","chunk-4334439e":"31d6cfe0","chunk-9f787bf8":"31d6cfe0","chunk-c432d8d0":"bed47338"}[e]+".css",n=c.p+s,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var l=o[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===n))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===s||u===n)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var s=t&&t.target&&t.target.src||n,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete r[e],m.parentNode.removeChild(m),a(o)},m.href=n;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){r[e]=0})));var s=n[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=n[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",d.name="ChunkLoadError",d.type=s,d.request=r,a[1](d)}n[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(a,s,function(t){return e[t]}.bind(null,s));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/twitter-frontend/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0bf4":function(e,t,a){e.exports=a.p+"img/success.f5143ce2.svg"},"206a":function(e,t,a){},2612:function(e,t,a){"use strict";var s=a("c968"),r=function(){return localStorage.getItem("token")};t["a"]={getCurrentUser:function(){return s["a"].get("/get_current_user",{headers:{Authorization:"Bearer ".concat(r())}})},getUser:function(e){var t=e.userId;return s["a"].get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(r())}})},getUserTweets:function(e){var t=e.userId;return s["a"].get("/users/".concat(t,"/tweets"),{headers:{Authorization:"Bearer ".concat(r())}})},getUserReply:function(e){var t=e.userId;return s["a"].get("/users/".concat(t,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(r())}})},getUserLike:function(e){var t=e.userId;return s["a"].get("/users/".concat(t,"/likes"),{headers:{Authorization:"Bearer ".concat(r())}})},getUserFollowings:function(e){return s["a"].get("/users/".concat(e,"/followings"),{headers:{Authorization:"Bearer ".concat(r())}})},getUserFollowers:function(e){return s["a"].get("/users/".concat(e,"/followers"),{headers:{Authorization:"Bearer ".concat(r())}})},getPopularUsers:function(){return s["a"].get("/users/top",{headers:{Authorization:"Bearer ".concat(r())}})},addFollowing:function(e){var t=e.id;return s["a"].post("/followships",t,{headers:{Authorization:"Bearer ".concat(r())}})},deleteFollowing:function(e){var t=e.userId;return s["a"].delete("/followships/".concat(t),null,{headers:{Authorization:"Bearer ".concat(r())}})},addNotice:function(e){var t=e.id;return s["a"].post("/notice",t,{headers:{Authorization:"Bearer ".concat(r())}})},deleteNotice:function(e){var t=e.userId;return s["a"].delete("/notice/".concat(t),null,{headers:{Authorization:"Bearer ".concat(r())}})},addLike:function(e){var t=e.tweetId;return s["a"].post("/tweets/".concat(t,"/like"),null,{headers:{Authorization:"Bearer ".concat(r())}})},deleteLike:function(e){var t=e.tweetId;return s["a"].post("/tweets/".concat(t,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(r())}})},updateUserProfile:function(e){var t=e.userId,a=e.formData;return s["a"].put("/users/".concat(t),a,{headers:{Authorization:"Bearer ".concat(r()),headers:{"Content-Type":"multipart/form-data"}}})},updateUserSetting:function(e){var t=e.userId,a=e.formData;return s["a"].put("/users/".concat(t,"/setting"),a,{headers:{Authorization:"Bearer ".concat(r())}})}}},2708:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l}));a("b680");var s=a("c1df"),r=a.n(s),n={filters:{fromNow:function(e){return r.a.locale("zh-tw"),e?r()(e).fromNow():"-"}}},o={filters:{timeFormat:function(e){return r.a.locale("zh-tw"),e?r()(e).format("a h:mm・YYYY年MMMDo"):"-"}}},i={filters:{accountTag:function(e){return"@".concat(e)}}},c={filters:{numberFormatEng:function(e){if(e>=1e9){var t=e/1e9,a=t/10>=1;return a?t.toFixed(0)+"G":t.toFixed(1)+"G"}if(e>=1e6){var s=e/1e6,r=s/10>=1;return r?s.toFixed(0)+"M":s.toFixed(1)+"M"}if(e>=1e3){var n=e/1e3,o=n/10>=1;return o?n.toFixed(0)+"K":n.toFixed(1)+"K"}return e}}},l={filters:{numberFormatTC:function(e){if(e>=1e8){var t=e/1e8,a=t/10>=1;return a?t.toFixed(0)+"億":t.toFixed(1)+"億"}if(e>=1e4){var s=e/1e4,r=s/10>=1;return r?s.toFixed(0)+"萬":s.toFixed(1)+"萬"}return e}}}},"28e8":function(e,t,a){"use strict";a("b0c0");var s=a("c968");t["a"]={signIn:function(e){var t=e.account,a=e.password;return s["a"].post("/signin",{account:t,password:a})},signUp:function(e){var t=e.account,a=e.name,r=e.email,n=e.password,o=e.checkPassword;return s["a"].post("/users",{account:t,name:a,email:r,password:n,checkPassword:o})}}},"2e15":function(e,t,a){"use strict";a("a4d3"),a("e01a");var s=a("c968");t["a"]={getNewestTweets:function(){return s["a"].get("/tweets")},createTweet:function(e){var t=e.description;return s["a"].post("/tweets",t)},getTweet:function(e){var t=e.tweetId;return s["a"].get("/tweets/".concat(t))},createTweetReply:function(e){var t=e.tweetId,a=e.comment;return s["a"].post("/tweets/".concat(t,"/replies"),{comment:a})},getTweetReplies:function(e){var t=e.tweetId;return s["a"].get("tweets/".concat(t,"/replies"))}}},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="4678"},"4cea":function(e,t,a){"use strict";a("b876")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"twitter-app"}},[e.isAuthenticated?a("Navbar"):e._e(),a("Toast",{attrs:{appToastMessage:e.appToastMessage}}),a("main",[a("router-view")],1)],1)},n=[],o=a("5530"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar"},[e._m(0),"user"==e.currentUser.role?a("div",{staticClass:"navbar_link"},[a("router-link",{staticClass:"link navbar_link_home-page",attrs:{to:"/tweets"}},[a("div",{staticClass:"navbar_link_content"},[a("div",{staticClass:"navbar_link_icon navbar_link_icon_home-page"}),a("h2",{staticClass:"navbar_link_text"},[e._v("首頁")])])]),a("router-link",{staticClass:"link navbar_link_user-page",attrs:{to:{name:"user",params:{id:this.$store.state.currentUser.id}}}},[a("div",{staticClass:"navbar_link_content"},[a("div",{staticClass:"navbar_link_icon navbar_link_icon_user-page"}),a("h2",{staticClass:"navbar_link_text"},[e._v("個人資料")])])]),a("router-link",{staticClass:"link navbar_link_setting-page",attrs:{to:{name:"account-setting",params:{id:this.$store.state.currentUser.id}}}},[a("div",{staticClass:"navbar_link_content"},[a("div",{staticClass:"navbar_link_icon navbar_link_icon_setting-page"}),a("h2",{staticClass:"navbar_link_text"},[e._v("設定")])])])],1):e._e(),"admin"==e.currentUser.role?a("div",{staticClass:"navbar_link"},[a("router-link",{staticClass:"link navbar_link_home-page",attrs:{to:"/admin/tweets"}},[a("div",{staticClass:"navbar_link_content"},[a("div",{staticClass:"navbar_link_icon navbar_link_icon_home-page"}),a("h2",{staticClass:"navbar_link_text"},[e._v("推文清單")])])]),a("router-link",{staticClass:"link navbar_link_user-page",attrs:{to:"/admin/users"}},[a("div",{staticClass:"navbar_link_content"},[a("div",{staticClass:"navbar_link_icon navbar_link_icon_user-page"}),a("h2",{staticClass:"navbar_link_text"},[e._v("使用者列表")])])])],1):e._e(),a("div",{staticClass:"navbar_link_tweet-launch"},[e.isModelShowed?a("NewTweetModal",{on:{"after-tweet-checkout":e.afterTweetCheckout,"after-tweet-send":e.afterTweetSend}}):e._e(),a("Toast",{attrs:{NavbarToastMessage:e.NavbarToastMessage}}),"user"==e.currentUser.role?a("button",{staticClass:"btn tweet-launch_button",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.tweetLaunchHandler.apply(null,arguments)}}},[e._v(" 推文 ")]):e._e()],1),a("div",{staticClass:"navbar_link_logout"},[a("div",{staticClass:"navbar_link_content",on:{click:e.logout}},[a("div",{staticClass:"navbar_link_icon navbar_link_icon_logout"}),a("h2",{staticClass:"navbar_link_text"},[e._v("登出")])])])])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"link navbar_brand",attrs:{href:"/"}},[a("div",{staticClass:"navbar_brand_logo"})])}],l=a("2f62"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleFormSubmit.apply(null,arguments)}}},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("span",[s("img",{staticClass:"modal-header_cross",attrs:{src:a("825b"),alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.checkoutHandler.apply(null,arguments)}}})])]),s("div",{staticClass:"modal-body"},[s("span",[s("img",{staticClass:"modal-body_user-image",attrs:{src:this.$store.state.currentUser.avatar,alt:""}})]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"modal-body_new-tweet",attrs:{type:"",autofocus:"",rows1:"3",cols:"50",placeholder:"有什麼新鮮事?"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"modal-footer_button-container"},[e.formValidation.tweet.error?s("div",{staticClass:"form-row__error-message"},[e._v(" "+e._s(e.formValidation.tweet.message)+" ")]):e._e(),s("button",{staticClass:"btn modal-button",attrs:{disabled:e.isProcessing||e.formValidation.tweet.error}},[e._v("推文")])])])])])])])},d=[],m=a("1da1"),f=(a("96cf"),a("498a"),a("a4d3"),a("e01a"),a("2e15")),p={name:"new-tweet-modal",data:function(){return{description:"",formValidation:{tweet:{lengthLimit:140,error:!1,message:""}},isProcessing:!1}},watch:{description:function(){this.description.trim().length>this.formValidation.tweet.lengthLimit?(this.formValidation.tweet.error=!0,this.formValidation.tweet.message="字數不可超過 140 字"):0==this.description.trim().length&&0!==this.description.length?(this.formValidation.tweet.error=!0,this.formValidation.tweet.message="推文不能為空白"):(this.formValidation.tweet.error=!1,this.formValidation.tweet.message="")}},methods:{handleFormSubmit:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0==e.description.trim().length&&(e.formValidation.tweet.error=!0,e.formValidation.tweet.message="推文不能為空白",e.description=""),!e.formValidation.tweet.error){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.isProcessing=!0,a={description:e.description},t.next=8,f["a"].createTweet({description:a});case 8:s=t.sent,r=s.data,e.description="",e.isProcessing=!1,e.$emit("after-tweet-send",r.status),e.checkoutHandler(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](3),console.log(t.t0),e.isProcessing=!1;case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))()},checkoutHandler:function(){this.$emit("after-tweet-checkout")}}},h=p,g=a("2877"),_=Object(g["a"])(h,u,d,!1,null,null,null),v=_.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"snackbar__navbar"}},[s("span",{staticClass:"snackbar_text"},[e._v(e._s(this.NavbarToastMessage.message))]),"error"==this.NavbarToastMessage.dataStatus?s("span",{staticClass:"snackbar_img"},[s("img",{attrs:{src:a("7314"),alt:""}})]):s("span",{staticClass:"snackbar_img"},[s("img",{attrs:{src:a("0bf4"),alt:""}})])])])},w=[],k=(a("ac1f"),a("5319"),{name:"NavbarToast",props:{NavbarToastMessage:{type:Object,required:!0}},watch:{NavbarToastMessage:{handler:function(){this.toastNav()},deep:!0}},methods:{toastNav:function(){var e=document.getElementById("snackbar__navbar");e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),2750)}}}),j=k,C=Object(g["a"])(j,b,w,!1,null,null,null),y=C.exports,T={name:"nav-bar",components:{NewTweetModal:v,Toast:y},data:function(){return{isModelShowed:!1,NavbarToastMessage:{message:"",dataStatus:""}}},computed:Object(o["a"])({},Object(l["b"])(["currentUser"])),methods:{tweetLaunchHandler:function(){this.isModelShowed=!0},afterTweetCheckout:function(){this.isModelShowed=!1},afterTweetSend:function(e){e?this.sendToastMessage("success"):this.sendToastMessage("error"),this.$store.commit("renderTweet"),this.$store.commit("renderTweet")},sendToastMessage:function(e){this.NavbarToastMessage.dataStatus="",this.NavbarToastMessage.dataStatus=e,this.NavbarToastMessage.message="推文發送成功"},logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},x=T,A=Object(g["a"])(x,i,c,!1,null,null,null),M=A.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"snackbar__App"}},[s("span",{staticClass:"snackbar_text"},[e._v(e._s(this.appToastMessage.message))]),"error"==this.appToastMessage.dataStatus?s("span",{staticClass:"snackbar_img"},[s("img",{attrs:{src:a("7314"),alt:""}})]):s("span",{staticClass:"snackbar_img"},[s("img",{attrs:{src:a("0bf4"),alt:""}})])])])},S=[],U={name:"App-Toast",props:{appToastMessage:{type:Object,required:!0}},watch:{appToastMessage:{handler:function(){this.toast()},deep:!0}},methods:{toast:function(){var e=document.getElementById("snackbar__App");e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),2750)}}},O=U,R=Object(g["a"])(O,P,S,!1,null,null,null),N=R.exports,L={name:"App",components:{Navbar:M,Toast:N},data:function(){return{appToastMessage:{message:"",dataStatus:""}}},computed:Object(o["a"])({},Object(l["b"])(["currentUser","isAuthenticated","alertAuthentication"])),watch:{alertAuthentication:{handler:function(){this.sendToastMessage("帳號不存在")},deep:!0}},methods:{sendToastMessage:function(e){this.appToastMessage.message="",this.appToastMessage.dataStatus="error",this.appToastMessage.message=e}}},V=L,E=Object(g["a"])(V,r,n,!1,null,null,null),F=E.exports,z=(a("d3b7"),a("3ca3"),a("ddb0"),a("caad"),a("b0c0"),a("2532"),a("8c4f")),I=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},$=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("404 can't find this page.")])])}],B={},D=Object(g["a"])(B,I,$,!1,null,null,null),H=D.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"center-view"},[a("div",{staticClass:"login"},[a("Toast",{attrs:{ToastMessage:e.ToastMessage}}),a("div",{staticClass:"logo"}),a("h2",[e._v("登入 Alphitter")]),a("account-login-form",{attrs:{isProcessing:e.isProcessing,clearPasswordInput:e.clearPasswordInput},on:{"after-form-submit":e.afterFormSubmit}}),a("div",{staticClass:"login__actions"},[a("router-link",{staticClass:"link",attrs:{to:"/register"}},[e._v("註冊 Alphitter")]),a("span",[e._v("・")]),a("router-link",{staticClass:"link",attrs:{to:"/admin/login"}},[e._v("後台登入")])],1)],1)])},Y=[],G=a("6b61"),J=a("de64"),X=a("28e8"),Q={name:"login-page",components:{AccountLoginForm:G["a"],Toast:J["a"]},data:function(){return{ToastMessage:{message:"",dataStatus:""},isProcessing:!1,clearPasswordInput:!1}},methods:{afterFormSubmit:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isProcessing=!0,t.clearPasswordInput=!1,a.next=5,X["a"].signIn({account:e.account,password:e.password});case 5:if(s=a.sent,r=s.data,"success"===r.status){a.next=12;break}throw t.sendToastMessage(r.message),new Error(r.message);case 12:if("user"===r.user.role){a.next=15;break}throw t.sendToastMessage("帳號不存在或密碼錯誤!"),new Error;case 15:localStorage.setItem("token",r.token),t.$store.commit("setCurrentUser",r.user),t.$router.push({name:"tweets"}),a.next=26;break;case 20:return a.prev=20,a.t0=a["catch"](0),console.log(a.t0),t.isProcessing=!1,t.clearPasswordInput=!0,a.abrupt("return");case 26:case"end":return a.stop()}}),a,null,[[0,20]])})))()},sendToastMessage:function(e){this.ToastMessage.dataStatus="",this.ToastMessage.dataStatus="error",this.ToastMessage.message=e}}},W=Q,K=Object(g["a"])(W,q,Y,!1,null,null,null),Z=K.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tweets-page"},[a("section",{staticClass:"center-view"},[e.isReplyModalShow?a("ReplyModal",{attrs:{replyTweet:e.replyTweet},on:{"after-comment-checkout":e.afterCommentCheckout,"after-reply-submit":e.afterReplySubmit}}):e._e(),a("PageNameBanner",{attrs:{"banner-title":e.bannerTitle}}),a("NewTweetForm",{on:{"after-submit-tweet-form":e.afterSumbitTweetForm}}),a("ScaleLoader",{attrs:{"is-loading":e.isLoading}}),e._l(e.tweets,(function(t){return a("NewestFeedList",{key:t.id,attrs:{tweet:t},on:{"after-add-like":e.addLikeHandler,"after-delete-like":e.deleteLikeHandler,"after-launch-reply-modal":e.afterLaunchReplyModal}})}))],2),a("section",{staticClass:"right-card"},[a("PopularUsersCard")],1),a("Toast",{attrs:{ToastMessage:e.ToastMessage}})],1)},te=[],ae=(a("d81d"),a("7db0"),a("5a23")),se=a("7424"),re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-wrapper"},[a("Toast",{attrs:{ToastMessage:e.ToastMessage}}),a("form",{staticClass:"tweet-form",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleFormSubmit.apply(null,arguments)}}},[a("div",{staticClass:"tweet-form__container"},[a("span",[a("img",{staticClass:"tweet-form__image",attrs:{src:this.$store.state.currentUser.avatar,alt:""}})]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"tweet-form__new-tweet",attrs:{type:"",autofocus:"",rows:"2",cols:"45",placeholder:"有什麼新鮮事?"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),a("div",{staticClass:"tweet-form__footer"},[e.formValidation.tweet.error?a("span",{staticClass:"tweet-form__footer__error-message"},[e._v(" "+e._s(e.formValidation.tweet.message)+" ")]):e._e(),a("button",{staticClass:"btn tweet-form__footer__button",attrs:{disabled:e.formValidation.tweet.error||e.isProcessing}},[e._v(" 推文 ")])])])],1)},ne=[],oe={name:"new-tweet-form",components:{Toast:J["a"]},data:function(){return{description:"",formValidation:{tweet:{lengthLimit:140,error:!1,message:""}},ToastMessage:{message:"",dataStatus:""},isProcessing:!1}},watch:{description:function(){this.description.trim().length>this.formValidation.tweet.lengthLimit?(this.formValidation.tweet.error=!0,this.formValidation.tweet.message="字數不可超過 140 字"):0===this.description.trim().length&&0!==this.description.length?(this.formValidation.tweet.error=!0,this.formValidation.tweet.message="推文不能為空白"):(this.formValidation.tweet.error=!1,this.formValidation.tweet.message="")}},methods:{handleFormSubmit:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0==e.description.trim().length&&(e.formValidation.tweet.error=!0,e.formValidation.tweet.message="推文不能為空白",e.description=""),!e.formValidation.tweet.error){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.isProcessing=!0,a={description:e.description},t.next=8,f["a"].createTweet({description:a});case 8:s=t.sent,r=s.data,r.status?e.sendToastMessage("success"):e.sendToastMessage("error"),e.description="",e.$emit("after-submit-tweet-form"),e.isProcessing=!1,e.formValidation.tweet.error=!1,t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](3),console.log(t.t0),e.isProcessing=!1;case 21:case"end":return t.stop()}}),t,null,[[3,17]])})))()},sendToastMessage:function(e){this.ToastMessage.dataStatus="",this.ToastMessage.dataStatus=e,this.ToastMessage.message="success"==e?"推文發送成功":"推文發送失敗"}}},ie=oe,ce=Object(g["a"])(ie,re,ne,!1,null,null,null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"newest"},[s("div",{staticClass:"newest__tweet d-flex",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toReplyRouter(e.tweet.id)}}},[s("span",[s("router-link",{attrs:{to:{name:"user",params:{id:e.tweet.User.id}}}},[s("img",{staticClass:"newest__tweet__image avatar-50",attrs:{src:e.tweet.User.avatar,alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toUserPage(e.tweet.UserId)}}})])],1),s("div",{staticClass:"newest__tweet__container d-flex-col"},[s("div",{staticClass:"newest__tweet__user"},[s("h2",{staticClass:"newest__tweet__user__name user-name-text",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toUserPage(e.tweet.UserId)}}},[e._v(" "+e._s(e.tweet.User.name)+" ")]),s("span",{staticClass:"newest__tweet__user__account user-account-text"},[e._v(e._s(e._f("accountTag")(e.tweet.User.account))+"・"+e._s(e._f("fromNow")(e.tweet.createdAt)))])]),s("div",{staticClass:"newest__tweet__descriptoion"},[s("p",{staticClass:"description-15"},[e._v(e._s(e.tweet.description))])]),s("div",{staticClass:"newest__tweet__icon d-flex"},[s("div",{staticClass:"newest__tweet__icon__reply d-flex",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.replyLaunchHandler(e.tweet.id)}}},[s("img",{staticClass:"icon newest__tweet__icon__image icon__reply__image",attrs:{src:a("c718"),alt:""}}),s("span",{staticClass:"newest__tweet__icon__count count-13"},[e._v(e._s(e.tweet.replyCount))])]),s("div",{staticClass:"newest__tweet__icon__like d-flex"},[e.tweet.isLiked?s("img",{staticClass:"icon newest__tweet__icon__image icon__like__image",attrs:{src:a("7f3a"),alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.deleteLike(e.tweet.id)}}}):s("img",{staticClass:"icon newest__tweet__icon__image icon__like__image",attrs:{src:a("9f80"),alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.addLike(e.tweet.id)}}}),s("span",{staticClass:"newest__tweet__icon__count count-13",class:{red:e.tweet.isLiked}},[e._v(e._s(e.tweet.likeCount))])])])])])])},de=[],me=a("2708"),fe={name:"Newest-tweets",props:{tweet:{type:Object,required:!0}},mixins:[me["b"],me["a"]],methods:{addLike:function(e){this.$emit("after-add-like",e)},deleteLike:function(e){this.$emit("after-delete-like",e)},replyLaunchHandler:function(e){this.$emit("after-launch-reply-modal",e)},toReplyRouter:function(e){this.$router.push({name:"tweet-replies",params:{id:e}})},toUserPage:function(e){this.$router.push({name:"user",params:{id:e}})}}},pe=fe,he=Object(g["a"])(pe,ue,de,!1,null,null,null),ge=he.exports,_e=a("c340"),ve=a("2612"),be=a("a0e7"),we={name:"Tweets",components:{PopularUsersCard:ae["a"],PageNameBanner:se["a"],NewTweetForm:le,NewestFeedList:ge,ReplyModal:_e["a"],Toast:J["a"],ScaleLoader:be["a"]},data:function(){return{bannerTitle:"首頁",tweets:[],isReplyModalShow:!1,replyTweet:{},ToastMessage:{message:"",dataStatus:""},isLoading:!0}},created:function(){var e=this;this.isLoading=!0,this.fetchTweetsData(),setInterval((function(){e.fetchTweetsData()}),3e4)},computed:Object(o["a"])({},Object(l["b"])(["isRenderTweet"])),watch:{isRenderTweet:{handler:function(){this.fetchTweetsData()},deep:!0}},methods:{fetchTweetsData:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].getNewestTweets();case 3:a=t.sent,s=a.data,e.tweets=s,e.isLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),e.isLoading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},addLikeHandler:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ve["a"].addLike({tweetId:e});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:t.tweets=t.tweets.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{likeCount:t.likeCount+1,isLiked:!0})})),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},deleteLikeHandler:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ve["a"].deleteLike({tweetId:e});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:t.tweets=t.tweets.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{likeCount:t.likeCount-1,isLiked:!1})})),a.next=16;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log("error",a.t0),t.ToastMessage.message="無法取消讚，請稍後再試",t.ToastMessage.dataStatus="",t.ToastMessage.dataStatus="error";case 16:case"end":return a.stop()}}),a,null,[[0,10]])})))()},afterLaunchReplyModal:function(e){var t=this.tweets.find((function(t){return t.id==e})),a=t.User,s=t.createdAt,r=t.description;this.replyTweet={id:e,name:a.name,account:a.account,createdAt:s,avatar:a.avatar,description:r},this.isReplyModalShow=!0},afterReplySubmit:function(e){this.tweets=this.tweets.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{replyCount:t.replyCount+1})}))},afterCommentCheckout:function(){this.isReplyModalShow=!1},afterSumbitTweetForm:function(){this.fetchTweetsData()}}},ke=we,je=Object(g["a"])(ke,ee,te,!1,null,null,null),Ce=je.exports;s["a"].use(l["a"]);var ye=new l["a"].Store({state:{currentUser:{id:-1,account:"",email:"",name:"",avatar:"",cover:"",role:""},isAuthenticated:!1,alertAuthentication:!1,token:"",isRenderTweet:!1,isRender:!1},mutations:{setCurrentUser:function(e,t){e.currentUser=Object(o["a"])(Object(o["a"])({},e.currentUser),t),e.isAuthenticated=!0},revokeAuthentication:function(e){e.currentUser={},e.isAuthenticated=!1,e.token="",localStorage.removeItem("token")},alert:function(e){e.alertAuthentication=!e.alertAuthentication},renderTweet:function(e){e.isRenderTweet=!e.isRenderTweet},render:function(e){e.isRender=!e.isRender}},actions:{fetchCurrentUser:function(e){return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n,o,i,c,l,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,ve["a"].getCurrentUser();case 4:return s=t.sent,r=s.data,n=r.id,o=r.name,i=r.email,c=r.account,l=r.role,u=r.avatar,d=r.cover,a("setCurrentUser",{id:n,name:o,email:i,account:c,role:l,avatar:u,cover:d}),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t["catch"](1),console.log("error",t.t0),console.error("can not fetch user information"),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},modules:{}});s["a"].use(z["a"]);var Te=function(e,t,a){var s=ye.state.currentUser;s&&"admin"!==s.role?a("/404"):a()},xe=[{path:"/",name:"root",redirect:"/login"},{path:"/login",name:"login",component:Z},{path:"/register",name:"register",component:function(){return a.e("chunk-418bf4a6").then(a.bind(null,"73cf"))}},{path:"/tweets",name:"tweets",component:Ce},{path:"/tweet/:id/replies",name:"tweet-replies",component:function(){return a.e("chunk-2d0ac41b").then(a.bind(null,"1985"))}},{path:"/user/:id",name:"user",component:function(){return a.e("chunk-c432d8d0").then(a.bind(null,"1511"))}},{path:"/user/:id/follow",name:"user-follow",component:function(){return a.e("chunk-2d0af123").then(a.bind(null,"0d81"))}},{path:"/user/:id/setting",name:"account-setting",component:function(){return a.e("chunk-418d3724").then(a.bind(null,"4ef5"))}},{path:"/admin",name:"admin-root",redirect:"/admin/login"},{path:"/admin/login",name:"admin-login",component:function(){return a.e("chunk-4334439e").then(a.bind(null,"23b1"))}},{path:"/admin/tweets",name:"admin-tweets",component:function(){return a.e("chunk-30869222").then(a.bind(null,"fa6a"))},beforeEnter:Te},{path:"/admin/users",name:"admin-users",component:function(){return a.e("chunk-9f787bf8").then(a.bind(null,"6135"))},beforeEnter:Te},{path:"*",name:"not-found",component:H}],Ae=new z["a"]({linkExactActiveClass:"active",routes:xe});Ae.beforeEach(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a,s){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("token"),n=!1,!r){e.next=6;break}return e.next=5,ye.dispatch("fetchCurrentUser");case 5:n=e.sent;case 6:if(o=["login","register","admin-login"],n||o.includes(t.name)){e.next=12;break}return ye.commit("alert"),setTimeout((function(){ye.commit("alert")}),2450),s("/login"),e.abrupt("return");case 12:if(!n||!o.includes(t.name)){e.next=19;break}if("user"!=ye.state.currentUser.role){e.next=18;break}return s("/tweets"),e.abrupt("return");case 18:"admin"==ye.state.currentUser.role&&s("/admin/tweets");case 19:s();case 20:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}());var Me=Ae;a("206a"),a("15f5"),a("7051");s["a"].config.productionTip=!1,new s["a"]({router:Me,store:ye,render:function(e){return e(F)}}).$mount("#app")},"5a23":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popular"},[a("ScaleLoader",{attrs:{"is-loading":e.isLoading}}),e.isLoading?e._e():[a("div",{staticClass:"popular__card"},[a("h2",{staticClass:"popular__card__title"},[e._v("Popular")]),e._l(e.popularUsers,(function(t){return a("div",{key:t.id,staticClass:"popular__card__user d-flex"},[a("span",[a("router-link",{attrs:{to:{name:"user",params:{id:t.id}}}},[a("img",{staticClass:"popular__card__user__avatar avatar-50",attrs:{src:t.avatar,alt:""}})])],1),a("div",{staticClass:"popular__card__user__name d-flex-col"},[a("p",{staticClass:"user-name-text",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.toUserPage(t.id)}}},[e._v(" "+e._s(t.name)+" ")]),a("p",{staticClass:"user-account-text"},[e._v(" "+e._s(e._f("accountTag")(t.account))+" ")])]),a("div",{staticClass:"popular__card__user__button"},[t.isFollowed||e.currentUser.id==t.id?t.isFollowed&&e.currentUser.id!=t.id?a("button",{staticClass:"btn-following",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.deleteFollowing(t.id)}}},[e._v(" 正在跟隨 ")]):e._e():a("button",{staticClass:"btn-follow",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.addFollowing(t.id)}}},[e._v(" 跟隨 ")])])])}))],2)]],2)},r=[],n=a("1da1"),o=a("5530"),i=(a("d81d"),a("96cf"),a("a0e7")),c=a("2708"),l=a("2612"),u=a("2f62"),d={name:"popular-user",mixins:[c["a"]],components:{ScaleLoader:i["a"]},data:function(){return{popularUsers:[],isLoading:!0}},created:function(){this.isLoading=!0,this.fetchPopularUsers()},computed:Object(o["a"])({},Object(u["b"])(["currentUser","isRender"])),watch:{isRender:{handler:function(){this.fetchPopularUsers()},deep:!0}},methods:{fetchPopularUsers:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].getPopularUsers();case 3:a=t.sent,s=a.data,e.popularUsers=s.users,e.isLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),e.isLoading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},addFollowing:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,s={id:e},t.currentUser.id!=e){a.next=4;break}throw new Error("無法自己追蹤自己");case 4:return a.next=6,l["a"].addFollowing({id:s});case 6:if(r=a.sent,n=r.data,"success"===n.status){a.next=10;break}throw new Error(n.message);case 10:t.$store.commit("render"),t.popularUsers=t.popularUsers.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{isFollowed:!0})})),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](0),console.log(a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})))()},deleteFollowing:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].deleteFollowing({userId:e});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:t.$store.commit("render"),t.popularUsers=t.popularUsers.map((function(t){return t.id!==e?t:Object(o["a"])(Object(o["a"])({},t),{},{isFollowed:!1})})),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},toUserPage:function(e){this.$router.push({name:"user",params:{id:e}})}}},m=d,f=(a("be56"),a("2877")),p=Object(f["a"])(m,s,r,!1,null,"790155c8",null);t["a"]=p.exports},"6b61":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"account-setting-form",attrs:{action:"",novalidate:""},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleFormSubmit.apply(null,arguments)}}},[a("div",{staticClass:"form-row"},[a("label",{staticClass:"form-row__label",attrs:{for:"account"}},[e._v(" 帳號 ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.accountDetail.account,expression:"accountDetail.account"}],staticClass:"form-row__input",class:{invalid:e.formValidation.account.error},attrs:{id:"account",type:"text",name:"account",required:""},domProps:{value:e.accountDetail.account},on:{input:function(t){t.target.composing||e.$set(e.accountDetail,"account",t.target.value)}}}),e.formValidation.account.error?a("div",{staticClass:"form-row__error-message"},[e._v(" "+e._s(e.formValidation.account.message)+" ")]):e._e()]),a("div",{staticClass:"form-row"},[a("label",{staticClass:"form-row__label",attrs:{for:"password"}},[e._v(" 密碼 ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.accountDetail.password,expression:"accountDetail.password"}],staticClass:"form-row__input",class:{invalid:e.formValidation.password.error},attrs:{id:"password",type:"password",name:"password",required:""},domProps:{value:e.accountDetail.password},on:{input:function(t){t.target.composing||e.$set(e.accountDetail,"password",t.target.value)}}}),e.formValidation.password.error?a("div",{staticClass:"form-row__error-message"},[e._v(" "+e._s(e.formValidation.password.message)+" ")]):e._e()]),a("button",{staticClass:"account-setting-form__submit-btn btn",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 登入 ")])])},r=[],n=(a("b64b"),a("d3b7"),a("159b"),a("498a"),{name:"AccountSettingForm",props:{isProcessing:{type:Boolean,required:!0},clearPasswordInput:{type:Boolean,default:!1}},data:function(){return{accountDetail:{account:"",password:"",role:"user"},formValidation:{account:{error:!1,message:""},password:{error:!1,message:""}}}},watch:{clearPasswordInput:function(){this.clearPasswordInput&&this.clearInput()}},methods:{handleFormSubmit:function(){var e=this,t=Object.keys(this.formValidation);return t.forEach((function(t){e.formValidation[t].error=!1,e.formValidation[t].message=""})),0===this.accountDetail.account.trim().length?(this.formValidation.account.error=!0,void(this.formValidation.account.message="請填入帳號")):0===this.accountDetail.password.trim().length?(this.formValidation.password.error=!0,void(this.formValidation.password.message="請填入密碼")):void this.$emit("after-form-submit",this.accountDetail)},clearInput:function(){this.accountDetail.password=""}}}),o=n,i=a("2877"),c=Object(i["a"])(o,s,r,!1,null,null,null);t["a"]=c.exports},"70b9":function(e,t,a){},7314:function(e,t,a){e.exports=a.p+"img/error.253d7815.svg"},7424:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-name-banner"},["user"==this.currentRouterName||"user-follow"==this.currentRouterName?s("div",{staticClass:"banner-user"},[s("div",{staticClass:"banner-user__user-page d-flex"},[s("span",[s("img",{staticClass:"banner-user__user-page__back",attrs:{src:a("c9a6"),alt:""},on:{click:function(t){return e.$router.push({name:"tweets"})}}})]),s("span",{staticClass:"banner-user__user-page__info"},[s("h2",{staticClass:"banner-user__user-page__name"},[e._v(e._s(this.user.name))]),s("p",{staticClass:"banner-user__user-page__tweets-count"},[e._v(" "+e._s(this.user.tweetsCount)+" 推文 ")])])])]):s("div",{staticClass:"banner"},[e.bannerTitle?s("div",{staticClass:"banner__other-page d-flex"},[e.bannerLinkBack?s("span",{staticClass:"banner__other-page__image"},[s("img",{staticClass:"banner__other-page__arrow",attrs:{src:a("c9a6"),alt:""},on:{click:function(t){return e.$router.back()}}})]):e._e(),s("span",{staticClass:"banner__other-page__info"},[s("h2",[e._v(" "+e._s(e.bannerTitle)+" ")])])]):e._e()])])},r=[],n=(a("b0c0"),{props:{user:{type:Object},bannerTitle:{type:String},bannerLinkBack:{type:Boolean,default:!1}},data:function(){return{currentRouterName:""}},methods:{getRouterName:function(){this.currentRouterName=this.$route.name}},created:function(){this.getRouterName()}}),o=n,i=a("2877"),c=Object(i["a"])(o,s,r,!1,null,null,null);t["a"]=c.exports},"7f3a":function(e,t,a){e.exports=a.p+"img/like-red.3db20f60.svg"},"825b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEaSURBVHgBjZPBbcJAEEX/WIIzJVCCS4g7SCrAHEJydCqwXYFzRMkh7iB0QAuUQAmcObB8f9bSGq3BlkZrz8z7M7s7NpdjiTkaONT2iwMmPGRSMmXHJJjhhb5XGPbunYEp8Ax7MUCasGrLl5q2kMhGgTi8wUqwMRfquA2DFc15W8XgIF6NVQhFiimwxUS4lP6zultr+3ki4EW66s3QifVgz48ElP+Bf0L9ge5Y+S2Wl4x0UAp2OMl4ZfJFntgZdK0XHsy8u7+6b3byNSrAQfqjJ+/hfjL9gN1EHFr61wMBTteCA9IIBo7cWGZbrqH4J0f+oglchiImeK5AOgZHRcDuzsgSwsUUWNW2txzlQj9Ubl41Z6B9BEc6EXMFPRCHfhWKGLkAAAAASUVORK5CYII="},"9f80":function(e,t,a){e.exports=a.p+"img/like.738852f2.svg"},a0e7:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"v-spinner"},[a("div",{staticClass:"spinner-Style v-scale v-scale1 spinner-delay1"}),a("div",{staticClass:"spinner-Style v-scale v-scale2 spinner-delay2"}),a("div",{staticClass:"spinner-Style v-scale v-scale3 spinner-delay3"}),a("div",{staticClass:"spinner-Style v-scale v-scale4 spinner-delay4"})])},r=[],n={name:"ScaleLoader",props:{isLoading:{type:Boolean,default:!1}}},o=n,i=(a("4cea"),a("2877")),c=Object(i["a"])(o,s,r,!1,null,null,null);t["a"]=c.exports},b876:function(e,t,a){},be56:function(e,t,a){"use strict";a("70b9")},c340:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("form",{staticClass:"modal__reply__form",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleFormSubmit.apply(null,arguments)}}},[s("div",{staticClass:"reply-modal"},[s("div",{staticClass:"reply-modal__header"},[s("span",[s("img",{staticClass:"reply-modal__header__cross",attrs:{src:a("825b"),alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.checkoutHandler.apply(null,arguments)}}})])]),s("div",{staticClass:"reply-modal__tweet d-flex"},[s("span",[s("a",{attrs:{href:""}},[s("img",{staticClass:"reply-modal__tweet__image avatar-50",attrs:{src:e.replyTweet.avatar,alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.checkoutHandler.apply(null,arguments)}}})]),s("span",{staticClass:"line"})]),s("div",{staticClass:"reply-modal__tweet__container d-flex-col"},[s("div",{staticClass:"reply-modal__tweet__user"},[s("h2",{staticClass:"reply-modal__tweet__user__name user-name-text"},[e._v(" "+e._s(e.replyTweet.name)+" ")]),s("span",{staticClass:"reply-modal__tweet__user__account user-account-text"},[e._v(e._s(e._f("accountTag")(e.replyTweet.account))+"・"+e._s(e._f("fromNow")(e.replyTweet.createdAt)))])]),s("div",{staticClass:"reply-modal__tweet__descriptoion"},[s("p",{staticClass:"description-15"},[e._v(" "+e._s(e.replyTweet.description)+" ")])]),s("div",{staticClass:"reply-modal__tweet__accout"},[s("p",{staticClass:"reply-account-13"},[e._v(" 回覆給 "),s("span",{staticClass:"ac-orange"},[e._v(e._s(e._f("accountTag")(e.replyTweet.account)))])])])])]),s("div",{staticClass:"reply-modal__reply d-flex"},[s("span",[s("img",{staticClass:"reply-modal__reply__image avatar-50",attrs:{src:this.$store.state.currentUser.avatar,alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.checkoutHandler.apply(null,arguments)}}})]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"reply-modal__reply__comment",attrs:{type:"",rows1:"3",cols:"50",placeholder:"推你的回覆"},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}})]),s("div",{staticClass:"reply-modal__footer"},[s("div",{staticClass:"reply-modal__footer__button-container d-flex"},[e.formValidation.comment.error?s("div",{staticClass:"form-row__error-message"},[e._v(" "+e._s(e.formValidation.comment.message)+" ")]):e._e(),s("button",{staticClass:"btn modal-button",attrs:{disabled:e.isProcessing||e.formValidation.comment.error}},[e._v("推文")])])])])])]),s("Toast",{attrs:{ToastMessage:e.ToastMessage}})],1)},r=[],n=a("1da1"),o=a("5530"),i=(a("96cf"),a("498a"),a("2708")),c=a("2e15"),l=a("de64"),u=a("2f62"),d={name:"reply-modal",components:{Toast:l["a"]},props:{replyTweet:{type:Object,required:!0}},mixins:[i["b"],i["a"]],data:function(){return{comment:"",formValidation:{comment:{lengthLimit:140,error:!1,message:""}},ToastMessage:{message:"",dataStatus:""},isProcessing:!1}},computed:Object(o["a"])({},Object(u["b"])(["currentUser"])),watch:{comment:function(){this.comment.trim().length>this.formValidation.comment.lengthLimit?(this.formValidation.comment.error=!0,this.formValidation.comment.message="字數不可超過 140 字"):0==this.comment.trim().length&&0!==this.comment.length?(this.formValidation.comment.error=!0,this.formValidation.comment.message="推文不能為空白"):(this.formValidation.comment.error=!1,this.formValidation.comment.message="")}},methods:{handleFormSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0==e.comment.trim().length&&(e.formValidation.comment.error=!0,e.formValidation.comment.message="推文不能為空白",e.comment=""),!e.formValidation.comment.error){t.next=4;break}return t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,c["a"].createTweetReply({tweetId:e.replyTweet.id,comment:e.comment});case 7:if(a=t.sent,s=a.data,"success"===s.status){t.next=11;break}throw new Error(s.message);case 11:e.ToastMessage.dataStatus="",e.ToastMessage.dataStatus="success",e.ToastMessage.message="回文已成功送出",setTimeout((function(){e.checkoutHandler(),e.comment=""}),1e3),e.$emit("after-reply-submit",e.replyTweet.id),e.isProcessing=!1,t.next=25;break;case 19:t.prev=19,t.t0=t["catch"](0),console.log(t.t0),e.ToastMessage.dataStatus="error",e.ToastMessage.message="推文失敗，請稍後再試",e.isProcessing=!1;case 25:case"end":return t.stop()}}),t,null,[[0,19]])})))()},checkoutHandler:function(){this.$emit("after-comment-checkout")}}},m=d,f=a("2877"),p=Object(f["a"])(m,s,r,!1,null,null,null);t["a"]=p.exports},c718:function(e,t,a){e.exports=a.p+"img/reply.dec715a1.svg"},c968:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d3b7");var s=a("bc3a"),r=a.n(s),n="https://alphitter-api-server.herokuapp.com/api/",o=r.a.create({baseURL:n});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var i=o},c9a6:function(e,t,a){e.exports=a.p+"img/back.b801ca3e.svg"},de64:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"snackbar"}},[s("span",{staticClass:"snackbar_text"},[e._v(e._s(this.ToastMessage.message))]),"error"==this.ToastMessage.dataStatus?s("span",{staticClass:"snackbar_img"},[s("img",{attrs:{src:a("7314"),alt:""}})]):s("span",{staticClass:"snackbar_img"},[s("img",{attrs:{src:a("0bf4"),alt:""}})])])])},r=[],n=(a("ac1f"),a("5319"),{name:"Toast",props:{ToastMessage:{type:Object,required:!0}},watch:{ToastMessage:{handler:function(){this.toast()},deep:!0}},methods:{toast:function(){var e=document.getElementById("snackbar");e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),2750)}}}),o=n,i=a("2877"),c=Object(i["a"])(o,s,r,!1,null,null,null);t["a"]=c.exports}});
//# sourceMappingURL=app.3ed87e6c.js.map