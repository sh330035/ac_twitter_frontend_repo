{"version":3,"sources":["webpack:///./src/api/admin.js","webpack:///./src/views/AdminTweets.vue?1cf0","webpack:///./src/components/admin/AdminFeedList.vue?70f4","webpack:///src/components/admin/AdminFeedList.vue","webpack:///./src/components/admin/AdminFeedList.vue?00d6","webpack:///./src/components/admin/AdminFeedList.vue","webpack:///src/views/AdminTweets.vue","webpack:///./src/views/AdminTweets.vue?1aff","webpack:///./src/views/AdminTweets.vue","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["adminSignIn","account","password","apiHelper","post","getAdminUsers","get","getAdminTweets","deleteTweet","tweetId","delete","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","bannerTitle","isLoading","_e","tweets","on","afterTweetDelete","ToastMessage","staticRenderFns","_l","tweet","key","id","User","avatar","_v","_s","name","_f","createdAt","description","$event","handleTweetDelete","props","initialTweets","type","Array","required","mixins","data","filters","ellipsis","value","length","len","slice","created","updateTweetsData","watch","methods","$emit","filter","component","components","AdminFeedList","PageNameBanner","Toast","ScaleLoader","message","dataStatus","fetchTweetsData","$","global","isArray","isConstructor","isObject","toAbsoluteIndex","lengthOfArrayLike","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","un$Slice","HAS_SPECIES_SUPPORT","SPECIES","max","Math","target","proto","forced","start","end","Constructor","result","n","O","k","fin","undefined","constructor","prototype"],"mappings":"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","file":"js/chunk-30869222.bb6c6668.js","sourcesContent":["import { apiHelper } from '../utils/helper'\n\nexport default {\n  // 管理員登入\n  adminSignIn({ account, password }) {\n    return apiHelper.post(`/admin/signin`, { account, password })\n  },\n  // 取得管理員可見的所有用戶清單\n  getAdminUsers() {\n    return apiHelper.get(`/admin/users`)\n  },\n  // 取得管理員可見的 tweet 清單\n  getAdminTweets() {\n    return apiHelper.get(`admin/tweets`)\n  },\n  // 管理員刪除特定一筆 tweet\n  deleteTweet({ tweetId }) {\n    return apiHelper.delete(`/admin/tweets/${tweetId}`)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin-tweets\"},[_c('section',{staticClass:\"center-view\"},[_c('page-name-banner',{attrs:{\"banner-title\":_vm.bannerTitle}}),_c('ScaleLoader',{attrs:{\"is-loading\":_vm.isLoading}}),(!_vm.isLoading)?_c('admin-feed-list',{attrs:{\"initial-tweets\":_vm.tweets},on:{\"after-tweet-delete\":_vm.afterTweetDelete}}):_vm._e()],1),_c('Toast',{attrs:{\"ToastMessage\":_vm.ToastMessage}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,staticClass:\"admin-tweets__tweet\"},[_c('div',{staticClass:\"admin-tweets__tweet__content-wrapper\"},[_c('img',{staticClass:\"admin-tweets__tweet__content-wrapper__avatar\",attrs:{\"src\":tweet.User.avatar,\"alt\":\"Avatar\"}}),_c('div',{staticClass:\"admin-tweets__tweet__content-wrapper__detail\"},[_c('div',{staticClass:\"admin-tweets__tweet__content-wrapper__detail__info\"},[_c('span',{staticClass:\"admin-tweets__tweet__content-wrapper__detail__info__name\"},[_vm._v(\" \"+_vm._s(tweet.User.name)+\" \")]),_c('span',{staticClass:\"\\n              admin-tweets__tweet__content-wrapper__detail__info__account\\n            \"},[_vm._v(\" \"+_vm._s(_vm._f(\"accountTag\")(tweet.User.account))+\" \")]),_c('span',{staticClass:\"\\n              admin-tweets__tweet__content-wrapper__detail__info__post-time\\n            \"},[_vm._v(\" ・\"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt))+\" \")])]),_c('div',{staticClass:\"admin-tweets__tweet__content-wrapper__detail__text\"},[_vm._v(\" \"+_vm._s(_vm._f(\"ellipsis\")(tweet.description))+\" \")])])]),_c('div',{staticClass:\"admin-tweets__tweet__delete\",on:{\"click\":function($event){return _vm.handleTweetDelete(tweet.id)}}})])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- v-for Start -->\n    <div v-for=\"tweet in tweets\" :key=\"tweet.id\" class=\"admin-tweets__tweet\">\n      <div class=\"admin-tweets__tweet__content-wrapper\">\n        <img\n          :src=\"tweet.User.avatar\"\n          class=\"admin-tweets__tweet__content-wrapper__avatar\"\n          alt=\"Avatar\"\n        />\n        <div class=\"admin-tweets__tweet__content-wrapper__detail\">\n          <div class=\"admin-tweets__tweet__content-wrapper__detail__info\">\n            <span\n              class=\"admin-tweets__tweet__content-wrapper__detail__info__name\"\n            >\n              {{ tweet.User.name }}\n            </span>\n            <span\n              class=\"\n                admin-tweets__tweet__content-wrapper__detail__info__account\n              \"\n            >\n              {{ tweet.User.account | accountTag }}\n            </span>\n            <span\n              class=\"\n                admin-tweets__tweet__content-wrapper__detail__info__post-time\n              \"\n            >\n              ・{{ tweet.createdAt | fromNow }}\n            </span>\n          </div>\n          <div class=\"admin-tweets__tweet__content-wrapper__detail__text\">\n            {{ tweet.description | ellipsis }}\n          </div>\n        </div>\n      </div>\n      <div\n        @click=\"handleTweetDelete(tweet.id)\"\n        class=\"admin-tweets__tweet__delete\"\n      ></div>\n    </div>\n    <!-- V-for End -->\n  </div>\n</template>\n\n<script>\nimport { fromNowFilter, accountFilter } from \"../../utils/mixins.js\";\n\nexport default {\n  props: {\n    initialTweets: {\n      type: Array,\n      required: true,\n    },\n  },\n  mixins: [fromNowFilter, accountFilter],\n  data() {\n    return {\n      tweets: [],\n    };\n  },\n  filters: {\n    ellipsis(value) {\n      const len = 50;\n      if (!value) return \"\";\n      if (value.length > len) {\n        return value.slice(0, len) + \"...\";\n      }\n      return value;\n    },\n  },\n  created() {\n    this.updateTweetsData();\n  },\n  watch: {\n    initialTweets: function () {\n      this.updateTweetsData();\n    },\n  },\n  methods: {\n    updateTweetsData() {\n      this.tweets = this.initialTweets;\n    },\n    handleTweetDelete(tweetId) {\n      this.$emit(\"after-tweet-delete\", { tweetId });\n      this.tweets = this.tweets.filter((tweet) => tweet.id !== tweetId);\n    },\n  },\n};\n</script>\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminFeedList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminFeedList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminFeedList.vue?vue&type=template&id=6ac07605&\"\nimport script from \"./AdminFeedList.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminFeedList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"admin-tweets\">\n    <section class=\"center-view\">\n      <page-name-banner :banner-title=\"bannerTitle\" />\n      <ScaleLoader :is-loading=\"isLoading\"/>\n      <admin-feed-list\n        v-if=\"!isLoading\"\n        @after-tweet-delete=\"afterTweetDelete\"\n        :initial-tweets=\"tweets\"\n      />\n    </section>\n    <Toast :ToastMessage=\"ToastMessage\" />\n  </div>\n</template>\n\n<script>\nimport PageNameBanner from '../components/PageNameBanner.vue'\nimport AdminFeedList from '../components/admin/AdminFeedList.vue'\nimport adminAPI from '../api/admin.js'\nimport Toast from \"../components/AlertToast.vue\";\nimport ScaleLoader from \"../components/ScaleLoader.vue\"\n\nexport default {\n  components: {\n    AdminFeedList,\n    PageNameBanner,\n    Toast,\n    ScaleLoader,\n  },\n  data() {\n    return {\n      bannerTitle: '推文清單',\n      tweets: [],\n      ToastMessage: {\n        message: \"\",\n        dataStatus: \"\",\n      },\n      isLoading: true,\n    }\n  },\n  created() {\n    this.isLoading = true\n    this.fetchTweetsData()\n  },\n  methods: {\n    async fetchTweetsData() {\n      try {\n        const { data } = await adminAPI.getAdminTweets()\n        this.tweets = data\n        this.isLoading = false\n      } catch (error) {\n        console.log(error)\n        this.ToastMessage.message = `無法取得使用者推文，請稍後再試`\n        this.ToastMessage.dataStatus = 'error'\n        this.isLoading = false\n      }\n    },\n    async afterTweetDelete({ tweetId }) {\n      try {\n        console.log('delete via API', tweetId)\n        const {data} = await adminAPI.deleteTweet({ tweetId })\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.ToastMessage.message = `已成功刪除推文 (ID: ${tweetId})`\n        this.ToastMessage.dataStatus = 'success'\n      } catch (error) {\n        console.log(error)\n      }\n      \n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweets.vue?vue&type=template&id=68026a3c&\"\nimport script from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweets.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar un$Slice = require('../internals/array-slice');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return un$Slice(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}