(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-418bf4a6"],{"73cf":function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",{staticClass:"center-view"},[e("div",{staticClass:"register"},[e("Toast",{attrs:{ToastMessage:a.ToastMessage}}),e("div",{staticClass:"logo"}),e("h2",[a._v("建立你的帳號")]),e("account-setting-form",{attrs:{clearPasswordInput:a.clearPasswordInput},on:{"after-form-submit":a.afterFormSubmit}}),e("span",{staticClass:"link",on:{click:function(t){return a.$router.push("/login")}}},[a._v("取消")])],1)])},o=[],r=e("1da1"),i=(e("96cf"),e("b0c0"),e("ccfa")),n=e("de64"),c=e("28e8"),l={components:{AccountSettingForm:i["a"],Toast:n["a"]},data:function(){return{ToastMessage:{message:"",dataStatus:""},isProcessing:!1,clearPasswordInput:!1,backendReturnStatus:!1}},methods:{afterFormSubmit:function(a){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,o,r,i,n,l,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=a.account,o=a.name,r=a.email,i=a.password,n=a.checkPassword,e.prev=1,t.isProcessing=!0,t.clearPasswordInput=!1,e.next=6,c["a"].signUp({account:s,name:o,email:r,password:i,checkPassword:n});case 6:if(l=e.sent,m=l.data,console.log(m),"success"===m.status){e.next=13;break}throw new Error(m.message);case 13:t.ToastMessage.dataStatus="",t.ToastMessage.dataStatus="success",t.ToastMessage.message="".concat(m.message),setTimeout((function(){t.$router.push({name:"login"})}),1200);case 17:e.next=26;break;case 19:e.prev=19,e.t0=e["catch"](1),t.isProcessing=!1,t.clearPasswordInput=!0,t.ToastMessage.dataStatus="",t.ToastMessage.dataStatus="error",t.ToastMessage.message="".concat(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[1,19]])})))()}}},m=l,u=e("2877"),d=Object(u["a"])(m,s,o,!1,null,null,null);t["default"]=d.exports},ccfa:function(a,t,e){"use strict";var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("form",{staticClass:"account-setting-form",attrs:{action:"",novalidate:""},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),a.handleFormSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-row"},[e("label",{staticClass:"form-row__label",attrs:{for:"account"}},[a._v(" 帳號 ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.accountDetail.account,expression:"accountDetail.account"}],staticClass:"form-row__input",class:{invalid:a.formValidation.account.error},attrs:{id:"account",type:"text",name:"account",required:""},domProps:{value:a.accountDetail.account},on:{input:function(t){t.target.composing||a.$set(a.accountDetail,"account",t.target.value)}}}),a.formValidation.account.error?e("div",{staticClass:"form-row__error-message"},[a._v(" "+a._s(a.formValidation.account.message)+" ")]):a._e()]),e("div",{staticClass:"form-row"},[e("label",{staticClass:"form-row__label",attrs:{for:"name"}},[a._v(" 名稱 ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.accountDetail.name,expression:"accountDetail.name"}],staticClass:"form-row__input",class:{invalid:a.formValidation.name.error},attrs:{id:"name",type:"text",name:"name",required:""},domProps:{value:a.accountDetail.name},on:{input:function(t){t.target.composing||a.$set(a.accountDetail,"name",t.target.value)}}}),e("div",{staticClass:"form-row__length-counter"},[e("span",{staticClass:"form-row__length-counter__current-length"},[a._v(" "+a._s(a.accountDetail.name.length)+" ")]),e("span",{staticClass:"form-row__length-counter__length-limit"},[a._v(" / "+a._s(a.formValidation.name.lengthLimit)+" ")])]),a.formValidation.name.error?e("div",{staticClass:"form-row__error-message"},[a._v(" "+a._s(a.formValidation.name.message)+" ")]):a._e()]),e("div",{staticClass:"form-row"},[e("label",{staticClass:"form-row__label",attrs:{for:"email"}},[a._v(" Email ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.accountDetail.email,expression:"accountDetail.email"}],staticClass:"form-row__input",class:{invalid:a.formValidation.email.error},attrs:{id:"email",type:"email",name:"email",required:""},domProps:{value:a.accountDetail.email},on:{input:function(t){t.target.composing||a.$set(a.accountDetail,"email",t.target.value)}}}),a.formValidation.email.error?e("div",{staticClass:"form-row__error-message"},[a._v(" "+a._s(a.formValidation.email.message)+" ")]):a._e()]),e("div",{staticClass:"form-row"},[e("label",{staticClass:"form-row__label",attrs:{for:"password"}},[a._v(" 密碼 ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.accountDetail.password,expression:"accountDetail.password"}],staticClass:"form-row__input",class:{invalid:a.formValidation.password.error},attrs:{id:"password",type:"password",name:"password",required:""},domProps:{value:a.accountDetail.password},on:{input:function(t){t.target.composing||a.$set(a.accountDetail,"password",t.target.value)}}}),a.formValidation.password.error?e("div",{staticClass:"form-row__error-message"},[a._v(" "+a._s(a.formValidation.password.message)+" ")]):a._e()]),e("div",{staticClass:"form-row"},[e("label",{staticClass:"form-row__label",attrs:{for:"checkPassword"}},[a._v(" 密碼確認 ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.accountDetail.checkPassword,expression:"accountDetail.checkPassword"}],staticClass:"form-row__input",class:{invalid:a.formValidation.checkPassword.error},attrs:{id:"checkPassword",type:"password",name:"checkPassword",required:""},domProps:{value:a.accountDetail.checkPassword},on:{input:function(t){t.target.composing||a.$set(a.accountDetail,"checkPassword",t.target.value)}}}),a.formValidation.checkPassword.error?e("div",{staticClass:"form-row__error-message"},[a._v(" "+a._s(a.formValidation.checkPassword.message)+" ")]):a._e()]),e("button",{staticClass:"account-setting-form__submit-btn btn",attrs:{disabled:a.isProcessing||a.formValidation.name.error,type:"submit"}},[a._v(" "+a._s(a.initialAccountDetail?"儲存":"註冊")+" ")])])},o=[],r=e("5530"),i=(e("b0c0"),e("b64b"),e("d3b7"),e("159b"),e("498a"),e("caad"),e("2532"),{name:"AccountSettingForm",props:{initialAccountDetail:{type:Object},isProcessing:{type:Boolean,default:!1},clearPasswordInput:{type:Boolean,default:!1}},data:function(){return{accountDetail:{account:"",name:"",email:"",password:"",checkPassword:"",role:"user"},formValidation:{account:{error:!1,message:"test"},name:{lengthLimit:50,error:!1,message:""},email:{error:!1,message:""},password:{error:!1,message:""},checkPassword:{error:!1,message:""}}}},created:function(){this.updateAccountDetail()},watch:{initialAccountDetail:function(){this.updateAccountDetail()},"accountDetail.name":function(){this.accountDetail.name.length>this.formValidation.name.lengthLimit?(this.formValidation.name.error=!0,this.formValidation.name.message="字數超過限制"):this.formValidation.name.error=!1},clearPasswordInput:function(){this.clearPasswordInput&&this.clearInput()}},methods:{updateAccountDetail:function(){this.accountDetail=Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.accountDetail),this.initialAccountDetail),{},{password:""})},handleFormSubmit:function(){var a=this,t=Object.keys(this.formValidation);return t.forEach((function(t){a.formValidation[t].error=!1,a.formValidation[t].message=""})),0===this.accountDetail.account.trim().length?(this.formValidation.account.error=!0,void(this.formValidation.account.message="請填入帳號")):0===this.accountDetail.name.trim().length?(this.formValidation.name.error=!0,void(this.formValidation.name.message="請填入名稱")):0===this.accountDetail.email.trim().length?(this.formValidation.email.error=!0,void(this.formValidation.email.message="請填入信箱")):this.accountDetail.email.includes("@")&&this.accountDetail.email.includes(".com")?0===this.accountDetail.password.trim().length?(this.formValidation.password.error=!0,void(this.formValidation.password.message="請填入密碼")):0===this.accountDetail.checkPassword.trim().length?(this.formValidation.checkPassword.error=!0,void(this.formValidation.checkPassword.message="請再次填入密碼已進行確認")):this.accountDetail.password!==this.accountDetail.checkPassword?(this.formValidation.checkPassword.error=!0,this.formValidation.checkPassword.message="密碼不相符，請重新確認",void(this.accountDetail.checkPassword="")):void this.$emit("after-form-submit",this.accountDetail):(this.formValidation.email.error=!0,void(this.formValidation.email.message="請填入正確的信箱格式"))},clearInput:function(){this.accountDetail.password="",this.accountDetail.checkPassword=""}}}),n=i,c=e("2877"),l=Object(c["a"])(n,s,o,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-418bf4a6.6c3274a9.js.map