{"version":3,"sources":["webpack:///./src/views/Register.vue?b8a4","webpack:///src/views/Register.vue","webpack:///./src/views/Register.vue?3ace","webpack:///./src/views/Register.vue","webpack:///./src/components/AccountSettingForm.vue?7f71","webpack:///src/components/AccountSettingForm.vue","webpack:///./src/components/AccountSettingForm.vue?e666","webpack:///./src/components/AccountSettingForm.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ToastMessage","_v","clearPasswordInput","on","afterFormSubmit","$event","$router","push","staticRenderFns","components","AccountSettingForm","Toast","data","message","dataStatus","isProcessing","backendReturnStatus","methods","component","preventDefault","stopPropagation","handleFormSubmit","apply","arguments","directives","name","rawName","value","accountDetail","expression","class","invalid","formValidation","account","error","domProps","target","composing","$set","_s","_e","length","lengthLimit","email","password","checkPassword","initialAccountDetail","props","type","Object","Boolean","default","role","created","updateAccountDetail","watch","clearInput","fileName","forEach","trim","$emit"],"mappings":"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","file":"js/chunk-418bf4a6.6c3274a9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"center-view\"},[_c('div',{staticClass:\"register\"},[_c('Toast',{attrs:{\"ToastMessage\":_vm.ToastMessage}}),_c('div',{staticClass:\"logo\"}),_c('h2',[_vm._v(\"建立你的帳號\")]),_c('account-setting-form',{attrs:{\"clearPasswordInput\":_vm.clearPasswordInput},on:{\"after-form-submit\":_vm.afterFormSubmit}}),_c('span',{staticClass:\"link\",on:{\"click\":function($event){return _vm.$router.push('/login')}}},[_vm._v(\"取消\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"center-view\">\n    <div class=\"register\">\n      <Toast :ToastMessage=\"ToastMessage\" />\n\n      <div class=\"logo\"></div>\n      <h2>建立你的帳號</h2>\n      <account-setting-form\n        @after-form-submit=\"afterFormSubmit\"\n        :clearPasswordInput=\"clearPasswordInput\"\n      />\n      <span class=\"link\" @click=\"$router.push('/login')\">取消</span>\n    </div>\n  </section>\n</template>\n\n<script>\nimport AccountSettingForm from \"../components/AccountSettingForm.vue\";\nimport Toast from \"../components/AlertToast.vue\";\nimport authorizationAPI from \"../api/authorization.js\";\n\nexport default {\n  components: {\n    AccountSettingForm,\n    Toast,\n  },\n  data() {\n    return {\n      // 母層須 props 此物件給 Toast 做為控制參數\n      ToastMessage: {\n        message: \"\",\n        dataStatus: \"\",\n      },\n      isProcessing: false,\n      clearPasswordInput: false,\n      // 預設後端回傳錯誤訊息\n      backendReturnStatus: false,\n    };\n  },\n  methods: {\n    async afterFormSubmit({ account, name, email, password, checkPassword }) {\n      try {\n        this.isProcessing = true;\n        this.clearPasswordInput = false;\n        const { data } = await authorizationAPI.signUp({\n          account,\n          name,\n          email,\n          password,\n          checkPassword,\n        });\n        console.log(data);\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        } else {\n          this.ToastMessage.dataStatus = \"\";\n          this.ToastMessage.dataStatus = \"success\";\n          this.ToastMessage.message = `${data.message}`;\n          setTimeout(() => {\n            this.$router.push({ name: \"login\" });\n          }, 1200);\n        }\n      } catch (error) {\n        this.isProcessing = false;\n        this.clearPasswordInput = true;\n        this.ToastMessage.dataStatus = \"\";\n        this.ToastMessage.dataStatus = \"error\";\n        this.ToastMessage.message = `${error.message}`;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=a99da150&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"account-setting-form\",attrs:{\"action\":\"\",\"novalidate\":\"\"},on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleFormSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"form-row__label\",attrs:{\"for\":\"account\"}},[_vm._v(\" 帳號 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.accountDetail.account),expression:\"accountDetail.account\"}],staticClass:\"form-row__input\",class:{ invalid: _vm.formValidation.account.error },attrs:{\"id\":\"account\",\"type\":\"text\",\"name\":\"account\",\"required\":\"\"},domProps:{\"value\":(_vm.accountDetail.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.accountDetail, \"account\", $event.target.value)}}}),(_vm.formValidation.account.error)?_c('div',{staticClass:\"form-row__error-message\"},[_vm._v(\" \"+_vm._s(_vm.formValidation.account.message)+\" \")]):_vm._e()]),_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"form-row__label\",attrs:{\"for\":\"name\"}},[_vm._v(\" 名稱 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.accountDetail.name),expression:\"accountDetail.name\"}],staticClass:\"form-row__input\",class:{ invalid: _vm.formValidation.name.error },attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"required\":\"\"},domProps:{\"value\":(_vm.accountDetail.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.accountDetail, \"name\", $event.target.value)}}}),_c('div',{staticClass:\"form-row__length-counter\"},[_c('span',{staticClass:\"form-row__length-counter__current-length\"},[_vm._v(\" \"+_vm._s(_vm.accountDetail.name.length)+\" \")]),_c('span',{staticClass:\"form-row__length-counter__length-limit\"},[_vm._v(\" / \"+_vm._s(_vm.formValidation.name.lengthLimit)+\" \")])]),(_vm.formValidation.name.error)?_c('div',{staticClass:\"form-row__error-message\"},[_vm._v(\" \"+_vm._s(_vm.formValidation.name.message)+\" \")]):_vm._e()]),_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"form-row__label\",attrs:{\"for\":\"email\"}},[_vm._v(\" Email \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.accountDetail.email),expression:\"accountDetail.email\"}],staticClass:\"form-row__input\",class:{ invalid: _vm.formValidation.email.error },attrs:{\"id\":\"email\",\"type\":\"email\",\"name\":\"email\",\"required\":\"\"},domProps:{\"value\":(_vm.accountDetail.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.accountDetail, \"email\", $event.target.value)}}}),(_vm.formValidation.email.error)?_c('div',{staticClass:\"form-row__error-message\"},[_vm._v(\" \"+_vm._s(_vm.formValidation.email.message)+\" \")]):_vm._e()]),_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"form-row__label\",attrs:{\"for\":\"password\"}},[_vm._v(\" 密碼 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.accountDetail.password),expression:\"accountDetail.password\"}],staticClass:\"form-row__input\",class:{ invalid: _vm.formValidation.password.error },attrs:{\"id\":\"password\",\"type\":\"password\",\"name\":\"password\",\"required\":\"\"},domProps:{\"value\":(_vm.accountDetail.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.accountDetail, \"password\", $event.target.value)}}}),(_vm.formValidation.password.error)?_c('div',{staticClass:\"form-row__error-message\"},[_vm._v(\" \"+_vm._s(_vm.formValidation.password.message)+\" \")]):_vm._e()]),_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"form-row__label\",attrs:{\"for\":\"checkPassword\"}},[_vm._v(\" 密碼確認 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.accountDetail.checkPassword),expression:\"accountDetail.checkPassword\"}],staticClass:\"form-row__input\",class:{ invalid: _vm.formValidation.checkPassword.error },attrs:{\"id\":\"checkPassword\",\"type\":\"password\",\"name\":\"checkPassword\",\"required\":\"\"},domProps:{\"value\":(_vm.accountDetail.checkPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.accountDetail, \"checkPassword\", $event.target.value)}}}),(_vm.formValidation.checkPassword.error)?_c('div',{staticClass:\"form-row__error-message\"},[_vm._v(\" \"+_vm._s(_vm.formValidation.checkPassword.message)+\" \")]):_vm._e()]),_c('button',{staticClass:\"account-setting-form__submit-btn btn\",attrs:{\"disabled\":_vm.isProcessing || _vm.formValidation.name.error,\"type\":\"submit\"}},[_vm._v(\" \"+_vm._s(_vm.initialAccountDetail ? '儲存' : '註冊')+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form\n    @submit.prevent.stop=\"handleFormSubmit\"\n    class=\"account-setting-form\"\n    action=\"\"\n    novalidate\n  >\n    <div class=\"form-row\">\n      <label for=\"account\" class=\"form-row__label\"> 帳號 </label>\n      <input\n        v-model=\"accountDetail.account\"\n        id=\"account\"\n        class=\"form-row__input\"\n        :class=\"{ invalid: formValidation.account.error }\"\n        type=\"text\"\n        name=\"account\"\n        required\n      />\n      <div v-if=\"formValidation.account.error\" class=\"form-row__error-message\">\n        {{ formValidation.account.message }}\n      </div>\n    </div>\n    <div class=\"form-row\">\n      <label for=\"name\" class=\"form-row__label\"> 名稱 </label>\n      <input\n        v-model=\"accountDetail.name\"\n        id=\"name\"\n        class=\"form-row__input\"\n        :class=\"{ invalid: formValidation.name.error }\"\n        type=\"text\"\n        name=\"name\"\n        required\n      />\n      <div class=\"form-row__length-counter\">\n        <span class=\"form-row__length-counter__current-length\">\n          {{ accountDetail.name.length }}\n        </span>\n        <span class=\"form-row__length-counter__length-limit\">\n          / {{ formValidation.name.lengthLimit }}\n        </span>\n      </div>\n      <div v-if=\"formValidation.name.error\" class=\"form-row__error-message\">\n        {{ formValidation.name.message }}\n      </div>\n    </div>\n    <div class=\"form-row\">\n      <label for=\"email\" class=\"form-row__label\"> Email </label>\n      <input\n        v-model=\"accountDetail.email\"\n        id=\"email\"\n        class=\"form-row__input\"\n        :class=\"{ invalid: formValidation.email.error }\"\n        type=\"email\"\n        name=\"email\"\n        required\n      />\n      <div v-if=\"formValidation.email.error\" class=\"form-row__error-message\">\n        {{ formValidation.email.message }}\n      </div>\n    </div>\n    <div class=\"form-row\">\n      <label for=\"password\" class=\"form-row__label\"> 密碼 </label>\n      <input\n        v-model=\"accountDetail.password\"\n        id=\"password\"\n        class=\"form-row__input\"\n        :class=\"{ invalid: formValidation.password.error }\"\n        type=\"password\"\n        name=\"password\"\n        required\n      />\n      <div v-if=\"formValidation.password.error\" class=\"form-row__error-message\">\n        {{ formValidation.password.message }}\n      </div>\n    </div>\n    <div class=\"form-row\">\n      <label for=\"checkPassword\" class=\"form-row__label\"> 密碼確認 </label>\n      <input\n        v-model=\"accountDetail.checkPassword\"\n        id=\"checkPassword\"\n        class=\"form-row__input\"\n        :class=\"{ invalid: formValidation.checkPassword.error }\"\n        type=\"password\"\n        name=\"checkPassword\"\n        required\n      />\n      <div\n        v-if=\"formValidation.checkPassword.error\"\n        class=\"form-row__error-message\"\n      >\n        {{ formValidation.checkPassword.message }}\n      </div>\n    </div>\n    <button :disabled=\"isProcessing || formValidation.name.error\" type=\"submit\" class=\"account-setting-form__submit-btn btn\">\n      {{ initialAccountDetail ? '儲存' : '註冊'}}\n    </button>\n  </form>\n</template>\n\n<script>\nexport default {\n  name: \"AccountSettingForm\",\n  props: {\n    initialAccountDetail: {\n      type: Object,\n    },\n    isProcessing: {\n      type: Boolean,\n      default: false\n    },\n    clearPasswordInput: {\n        type: Boolean,\n        default: false\n      },\n  },\n  data() {\n    return {\n      accountDetail: {\n        account: \"\",\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        checkPassword: \"\",\n        role: \"user\",\n      },\n      formValidation: {\n        account: {\n          error: false,\n          message: \"test\",\n        },\n        name: {\n          lengthLimit: 50,\n          error: false,\n          message: \"\",\n        },\n        email: {\n          error: false,\n          message: \"\",\n        },\n        password: {\n          error: false,\n          message: \"\",\n        },\n        checkPassword: {\n          error: false,\n          message: \"\",\n        },\n      },\n    };\n  },\n  created() {\n    this.updateAccountDetail();\n  },\n  watch: {\n    initialAccountDetail: function () {\n      this.updateAccountDetail();\n    },\n    \"accountDetail.name\": function () {\n      if (\n        this.accountDetail.name.length > this.formValidation.name.lengthLimit\n      ) {\n        this.formValidation.name.error = true;\n        this.formValidation.name.message = \"字數超過限制\";\n      } else {\n        this.formValidation.name.error = false;\n      }\n    },\n    clearPasswordInput: function () {\n      if (this.clearPasswordInput) {\n        this.clearInput()\n      }\n    }\n  },\n  methods: {\n    updateAccountDetail() {\n      this.accountDetail = {\n        ...this.accountDetail,\n        ...this.initialAccountDetail,\n        password: \"\",\n      };\n    },\n    handleFormSubmit() {\n      // reset data of this.formValidation\n      const fileName = Object.keys(this.formValidation);\n      fileName.forEach((name) => {\n        this.formValidation[name].error = false;\n        this.formValidation[name].message = \"\";\n      });\n      // form validation of account\n      if (this.accountDetail.account.trim().length === 0) {\n        this.formValidation.account.error = true;\n        this.formValidation.account.message = \"請填入帳號\";\n        return;\n      }\n      // form validation of name\n      if (this.accountDetail.name.trim().length === 0) {\n        this.formValidation.name.error = true;\n        this.formValidation.name.message = \"請填入名稱\";\n        return;\n      }\n      // form validation of email\n      if (this.accountDetail.email.trim().length === 0) {\n        this.formValidation.email.error = true;\n        this.formValidation.email.message = \"請填入信箱\";\n        return;\n      } else if (\n        !this.accountDetail.email.includes(\"@\") ||\n        !this.accountDetail.email.includes(\".com\")\n      ) {\n        this.formValidation.email.error = true;\n        this.formValidation.email.message = \"請填入正確的信箱格式\";\n        return;\n      }\n      // form validation of password\n      if (this.accountDetail.password.trim().length === 0) {\n        this.formValidation.password.error = true;\n        this.formValidation.password.message = \"請填入密碼\";\n        return;\n      }\n      if (this.accountDetail.checkPassword.trim().length === 0) {\n        this.formValidation.checkPassword.error = true;\n        this.formValidation.checkPassword.message = \"請再次填入密碼已進行確認\";\n        return;\n      } else if (\n        this.accountDetail.password !== this.accountDetail.checkPassword\n      ) {\n        this.formValidation.checkPassword.error = true;\n        this.formValidation.checkPassword.message = \"密碼不相符，請重新確認\";\n        this.accountDetail.checkPassword = \"\";\n        return;\n      }\n      // formSubmit\n      this.$emit(\"after-form-submit\", this.accountDetail);\n    },\n    clearInput () {\n      this.accountDetail.password = ''\n      this.accountDetail.checkPassword = ''\n    }\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountSettingForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountSettingForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AccountSettingForm.vue?vue&type=template&id=1c67f855&\"\nimport script from \"./AccountSettingForm.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountSettingForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}