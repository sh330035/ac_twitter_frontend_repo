{"version":3,"sources":["webpack:///./src/views/UserFollow.vue?edd4","webpack:///./src/components/FollowsNavPills.vue?5520","webpack:///./src/components/FollowsNavPills.vue","webpack:///./src/components/FollowList.vue?01b1","webpack:///src/components/FollowList.vue","webpack:///./src/components/FollowList.vue?7f85","webpack:///./src/components/FollowList.vue","webpack:///src/views/UserFollow.vue","webpack:///./src/views/UserFollow.vue?b758","webpack:///./src/views/UserFollow.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","user","isLoading","_e","follows","on","addFollowing","deleteFollowing","staticRenderFns","name","_v","query","follow","script","component","_l","key","id","avatar","$event","preventDefault","stopPropagation","toUserPage","_s","_f","account","introduction","isFollowed","currentUser","deleteFollowhandler","addFollowhandler","props","type","Array","required","computed","mixins","methods","$router","push","$emit","userId","components","PopularUsersCard","PageNameBanner","FollowsNavPills","FollowList","ScaleLoader","data","tweetsCount","followPageStatus","beforeRouteUpdate","followType","fetchUserFollow","next","created","parseInt","fetchUsers","watch","isRender","handler","deep"],"mappings":"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","file":"js/chunk-2d0af123.57e585b9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test-page\"},[_c('section',{staticClass:\"center-view\"},[_c('PageNameBanner',{attrs:{\"user\":_vm.user}}),_c('FollowsNavPills'),_c('ScaleLoader',{attrs:{\"is-loading\":_vm.isLoading}}),(!_vm.isLoading)?_c('FollowList',{attrs:{\"follows\":_vm.follows},on:{\"after-add-follow\":_vm.addFollowing,\"after-delete-follow\":_vm.deleteFollowing}}):_vm._e()],1),_c('section',{staticClass:\"right-card\"},[_c('PopularUsersCard')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"follow-navPills d-flex\"},[_c('li',{staticClass:\"follow-navPills__item\"},[_c('router-link',{staticClass:\"link follow-navPills__item__link navpill-text\",attrs:{\"to\":{ name: 'user-follow' }}},[_vm._v(\"跟隨者\")])],1),_c('li',{staticClass:\"follow-navPills__item\"},[_c('router-link',{staticClass:\"link follow-navPills__item__link navpill-text\",attrs:{\"to\":{ name: 'user-follow', query: { follow: 'following' } }}},[_vm._v(\"正在跟隨\")])],1),_c('div',{staticClass:\"border\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./FollowsNavPills.vue?vue&type=template&id=772bb662&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"follow\"},_vm._l((_vm.follows),function(follow){return _c('div',{key:follow.id,staticClass:\"follow__list d-flex\"},[_c('span',[_c('img',{staticClass:\"follow__list__image avatar-50\",attrs:{\"src\":follow.avatar,\"alt\":\"\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.toUserPage(follow.id)}}})]),_c('div',{staticClass:\"follow__list__container d-flex-col\"},[_c('div',{staticClass:\"follow__list__user\"},[_c('h2',{staticClass:\"follow__list__user__name user-name-text\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.toUserPage(follow.id)}}},[_vm._v(\" \"+_vm._s(follow.name)+\" \")]),_c('span',{staticClass:\"follow__list__user__account user-account-text\"},[_vm._v(_vm._s(_vm._f(\"accountTag\")(follow.account)))])]),_c('div',{staticClass:\"follow__list__descriptoion\"},[_c('p',{staticClass:\"description-15\"},[_vm._v(\" \"+_vm._s(follow.introduction)+\" \")])])]),_c('div',{staticClass:\"follow__list__button\"},[(!follow.isFollowed && _vm.currentUser.id != follow.id)?_c('button',{staticClass:\"btn-follow\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addFollowhandler(follow.id)}}},[_vm._v(\" 跟隨 \")]):(follow.isFollowed && _vm.currentUser.id != follow.id)?_c('button',{staticClass:\"btn-following\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.deleteFollowhandler(follow.id)}}},[_vm._v(\" 正在跟隨 \")]):_vm._e()])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"follow\">\n    <div class=\"follow__list d-flex\" v-for=\"follow in follows\" :key=\"follow.id\">\n      <span>\n        <img\n          :src=\"follow.avatar\"\n          alt=\"\"\n          class=\"follow__list__image avatar-50\"\n          @click.prevent.stop=\"toUserPage(follow.id)\"\n        />\n      </span>\n      <div class=\"follow__list__container d-flex-col\">\n        <div class=\"follow__list__user\">\n          <h2\n            class=\"follow__list__user__name user-name-text\"\n            @click.prevent.stop=\"toUserPage(follow.id)\"\n          >\n            {{ follow.name }}\n          </h2>\n          <span class=\"follow__list__user__account user-account-text\">{{\n            follow.account | accountTag\n          }}</span>\n        </div>\n        <div class=\"follow__list__descriptoion\">\n          <p class=\"description-15\">\n            {{ follow.introduction }}\n          </p>\n        </div>\n      </div>\n      <div class=\"follow__list__button\">\n        <button\n          class=\"btn-follow\"\n          v-if=\"!follow.isFollowed && currentUser.id != follow.id\"\n          @click.prevent.stop=\"addFollowhandler(follow.id)\"\n        >\n          跟隨\n        </button>\n        <button\n          class=\"btn-following\"\n          v-else-if=\"follow.isFollowed && currentUser.id != follow.id\"\n          @click.prevent.stop=\"deleteFollowhandler(follow.id)\"\n        >\n          正在跟隨\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fromNowFilter, accountFilter } from \"../utils/mixins.js\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"follow-list\",\n  props: {\n    follows: {\n      type: Array,\n      required: true,\n    },\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  mixins: [fromNowFilter, accountFilter],\n  methods: {\n    toUserPage(userId) {\n      this.$router.push({ name: \"user\", params: { id: userId } });\n    },\n    addFollowhandler(userId) {\n      this.$emit(\"after-add-follow\", userId);\n    },\n    deleteFollowhandler(userId) {\n      this.$emit(\"after-delete-follow\", userId);\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FollowList.vue?vue&type=template&id=7bd476c6&\"\nimport script from \"./FollowList.vue?vue&type=script&lang=js&\"\nexport * from \"./FollowList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"test-page\">\n    <section class=\"center-view\">\n      <PageNameBanner :user=\"user\" />\n      <FollowsNavPills />\n      <ScaleLoader :is-loading=\"isLoading\"/>\n      <FollowList\n        v-if=\"!isLoading\"\n        :follows=\"follows\"\n        @after-add-follow=\"addFollowing\"\n        @after-delete-follow=\"deleteFollowing\"\n      />\n    </section>\n    <section class=\"right-card\">\n      <PopularUsersCard />\n    </section>\n  </div>\n</template>\n\n<script>\nimport PopularUsersCard from \"../components/PopularUsersCard.vue\";\nimport PageNameBanner from \"../components/PageNameBanner.vue\";\nimport FollowsNavPills from \"../components/FollowsNavPills.vue\";\nimport FollowList from \"../components/FollowList.vue\";\nimport ScaleLoader from \"../components/ScaleLoader.vue\"\nimport userAPI from \"../api/users\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"user-follow\",\n  components: {\n    PopularUsersCard,\n    PageNameBanner,\n    FollowsNavPills,\n    FollowList,\n    ScaleLoader,\n  },\n  data() {\n    return {\n      user: {\n        id: -1,\n        account: \"\",\n        name: \"\",\n        tweetsCount: -1,\n      },\n      follows: [],\n      followPageStatus: \"\",\n      isLoading: true,\n    };\n  },\n  beforeRouteUpdate(to, from, next) {\n    const followType = to.query.follow ? to.query.follow : \"followers\";\n    this.followPageStatus = followType;\n    this.fetchUserFollow(this.user.id, followType);\n    next();\n  },\n  created() {\n    this.isLoading = true\n    const { id: userId } = this.$route.params;\n    const { follow = \"\" } = this.$route.query;\n\n    if (follow) {\n      this.followPageStatus = \"following\";\n    } else {\n      this.followPageStatus = \"followers\";\n    }\n    // 須轉成 Number 再傳\n    this.fetchUserFollow(parseInt(userId, 10), this.followPageStatus);\n    this.fetchUsers(parseInt(userId, 10));\n  },\n  watch: {\n    isRender: {\n      handler: function () {\n        const userId = this.user.id;\n        const { follow = \"\" } = this.$route.query;\n        if (follow) {\n          this.followPageStatus = \"following\";\n        } else {\n          this.followPageStatus = \"followers\";\n        }\n        this.fetchUserFollow(parseInt(userId, 10), this.followPageStatus);\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    // 取得目前頁面之用戶資料\n    async fetchUsers(userId) {\n      try {\n        const { data } = await userAPI.getUser({ userId });\n\n        this.user = {\n          id: data.id,\n          account: data.account,\n          name: data.name,\n          tweetsCount: data.TweetCount,\n        };\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async fetchUserFollow(userId, followType) {\n      try {\n        if (followType == \"following\") {\n          const { data } = await userAPI.getUserFollowings(userId);\n          this.follows = data;\n          this.isLoading = false\n          return;\n        } else if (followType == \"followers\") {\n          const { data } = await userAPI.getUserFollowers(userId);\n          this.follows = data;\n          this.isLoading = false\n          return;\n        } else {\n          throw new Error();\n        }\n      } catch (error) {\n        console.log(error);\n        this.isLoading = false\n      }\n    },\n    async addFollowing(userId) {\n      try {\n        const id = { id: userId };\n        if (this.currentUser.id == userId) {\n          throw new Error(\"無法自己追蹤自己\");\n        }\n\n        const { data } = await userAPI.addFollowing({ id });\n\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        // 修改 vuex 狀態\n        this.$store.commit(\"render\");\n\n        this.follows = this.follows.map((user) => {\n          if (user.id !== userId) {\n            return user;\n          } else {\n            return {\n              ...user,\n              isFollowed: true,\n            };\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async deleteFollowing(userId) {\n      try {\n        const { data } = await userAPI.deleteFollowing({ userId });\n\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        // 修改 vuex 狀態\n        this.$store.commit(\"render\");\n\n        this.follows = this.follows.map((user) => {\n          if (user.id !== userId) {\n            return user;\n          } else {\n            return {\n              ...user,\n              isFollowed: false,\n            };\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n\n  computed: {\n    ...mapState([\"currentUser\", \"isRender\"]),\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollow.vue?vue&type=template&id=216911b8&\"\nimport script from \"./UserFollow.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}